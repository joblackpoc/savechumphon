{% extends 'backend/base.html' %}
{% load crispy_forms_tags %}
{% block content %}

        <!-- Latest Users -->
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">ผู้เดินทางเข้ามาจังหวัดชุมพร</h3>
            <form method='get'>
              {{person_filter_form|crispy}}
              <button type="submit">Search</button>             
            </form>
          </div>
          <div class="panel-body">
            <table class="table table-striped table-hover">
                <tr>
                  <th>ชื่อ</th>
                  <th>นามสกุล</th>
                  <th>เบอร์โทร</th>
                  <th>อำเภอ</th>
                  <th>ตำบล</th>
                  <th>รายละเอียด</th>
                </tr>
                
                {% for person in filter %}
                <tr>
                  <td>{{ person.fname }}</td>
                  <td>{{ person.lname }}</td>
                  <td>{{ person.mobile_phone }}</td>
                  <td>{{ person.campur }}</td>
                  <td>{{ person.ctambon }}</td>
                  <td><a href="{% url 'detailview' person.id %}">รายละเอียด</a></td>
                </tr>
                {% endfor %}
               
              </table>
              <!--Pagination start-->

                {% if filter.has_previous %}
                  <a class="btn btn-outline-primary mb-4" href="?page=1">First</a>
                  <a class="btn btn-outline-primary mb-4" href="?page={{ filter.previous_page_number }}">Previous</a>
                {% endif %}
                                    
                {% for num in filter.paginator.page_range %}
                   {% if filter.number == num %}
                      <a class="btn btn-primary mb-4" href="?page={{ num }}">{{ num }}</a>
                    {% elif num > filter.number|add:'-3' and num < filter.number|add:'3' %}
                      <a class="btn btn-outline-primary mb-4" href="?page={{ num }}">{{ num }}</a>
                    {% endif %}
                {% endfor %}
                                    
                {% if filter.has_next %}
                  <a class="btn btn-outline-primary mb-4" href="?page={{ filter.next_page_number }}">Next</a>
                  <a class="btn btn-outline-primary mb-4" href="?page={{ filter.paginator.num_pages }}">Last</a>
                {% endif %}

              <!--Pagination end-->
          </div>
        </div>

{% endblock content %}
  